<!DOCTYPE html>
<html lang="ko">
<head class="h-100">
  <title>사사게 검색기 :: LoaChart|로아차트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="로스트아크 인벤 사사게 검색기">
  <meta name="keywords" content="로아차트,loachart,로차트,로스트,아크,로아,차트,마리샵,비밀,지도,카게,경매,분배금,제작,영지,더보기,도감작,악추피,인추피,야추피,계산기,전설,각인,각인서,베른,파푸,오레하" />
  <meta property="og:title" content="로아 인벤 사사게 검색기 :: LoaChart|로아차트"/>
  <meta property="og:description" content="로스트아크 인벤 사사게 검색기"/>
  <meta property="og:url" content="https://loachart.com/sasagefind"/>
  <meta property="og:site_name" content="로아차트"/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://loachart.com/img/ogimage.png"/>
  <link rel="apple-touch-icon" sizes="57x57" href="/img/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/img/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
  <link rel="manifest" href="/img/favicon/manifest.json">
  <meta name="msapplication-TileImage" content="/img/favicon/ms-icon-144x144.png">
  <script>var here = "sasagefind";</script>
  
  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script async src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <!-- custom -->
  <link rel="stylesheet" type="text/css" href="css/custom.css">
  <script async src="js/custom.js"></script>
  <link href="css/cover.css" rel="stylesheet">
</head>

<body class="d-flex h-100 text-center text-white bg-dark">
  <div class="container d-flex w-100 h-100 p-3 mx-auto flex-column">

    <header class="mb-3">
      <div>
        <a href="/"><h3 class="float-md-start mb-0 text-white">LoaChart</h3></a>
        <nav class="nav nav-masthead justify-content-center float-md-end"></nav>
      </div>
    </header>

    <main class="pt-5 px-3">
      <div class="text-center">
        <div class="ad mb-5">
          <div>
            <div class="text-center">
              <!-- loachart_top -->
              <ins class="adsbygoogle"
                  style="display:inline-block;width:728px;height:90px"
                  data-ad-client="ca-pub-4936470262963011"
                  data-ad-slot="1957033553"></ins>
              <script>
                  (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <div id="ads-left">
            <div>
              <!-- loachart_left -->
              <ins class="adsbygoogle"
                  style="display:inline-block;width:300px;height:600px"
                  data-ad-client="ca-pub-4936470262963011"
                  data-ad-slot="8271407887"></ins>
              <script>
                  (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
          <div id="ads-right">
            <div>
              <!-- loachart_right -->
              <ins class="adsbygoogle"
                  style="display:inline-block;width:300px;height:600px"
                  data-ad-client="ca-pub-4936470262963011"
                  data-ad-slot="5453672853"></ins>
              <script>
                  (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
          </div>
        </div>
      
      <div class="pt-5">
        <p>
          로아 인벤에서 검색하면 최근 10,000개밖에 못찾고 다음 찾기도 계속 눌러야하고<br>
          GE << 이렇게 검색하면 "GE??" , "??GE??" , "??GE" 이런식으로 다른 단어까지 같이 검색되서<br>
          정확하게 원하는 단어만 검색 할 수 있게 만들어보았습니다.
        </p>
        <p style="font-size: 0.8rem!important;">
          [갱신 주기는 5분이며 게시글마다 5초 텀을주어서 데이터를 가져옵니다.]
        </p>
        <div class="input-group w-50 mx-auto input-group-lg mb-3">
          <span class="input-group-text">검색어</span>
          <input type="text" class="form-control text-center" id="charname">
          <button class="btn btn-outline-light" type="button" id="find"><img src="img/search.png" alt="검색"></button>
        </div>
        <div id="loading" style="display: none;">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;display:block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
            <circle cx="50" cy="50" r="0" fill="none" stroke="#ffffff" stroke-width="2">
              <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"></animate>
              <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"></animate>
            </circle><circle cx="50" cy="50" r="0" fill="none" stroke="#ffffff" stroke-width="2">
              <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.5s"></animate>
              <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.5s"></animate>
            </circle>
          </svg>
        </div>
        <div id="findlistzone" style="display:none">
          <table class="table table-dark float-end table-hover col mb-3">
            <thead>
              <tr>
                <th scope="col" class="align-middle">작성일</th>
                <th scope="col" class="align-middle">글 제목</th>
                <th scope="col" class="align-middle">요청</th>
              </tr>
            </thead>
            <tbody id="sasagewritelist">
            </tbody>
          </table>
            <p class="text-end" style="font-size: 0.9rem!important;">
              ※ 클릭하시면 그 게시글 창을 띄웁니다.
            </p>
            <p class="text-end" style="font-size: 0.9rem!important;">※ 만약 박제 됐었는데 인벤 이의제기를 신청하였거나, 합의(?)하여 게시글이 삭제 되었을 경우<br>
              [재확인]을 누르시면 서버 데이터에서 삭제됩니다.
            </p>
        </div>
        </div>
    </main>

    <footer class="mt-5 text-white-50">
      <!-- AdSense -->
      <div class="ADsense mb-5">
        <!-- loa_market_chart -->
        <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-4936470262963011"
        data-ad-slot="8129420230"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
      <p>Cover template for <a href="https://getbootstrap.com/" class="text-white">Bootstrap</a>, by <a href="https://twitter.com/mdo" class="text-white">@mdo</a>.</p>
    </footer>
  </div>

  <script>
    var lastcharname = ""

    document.querySelector("#charname").focus();

    document.querySelector("#find").addEventListener('click', sasagefind);
    document.querySelector("#charname").addEventListener('keyup', (e)=>{
      if(e.keyCode === 13){
        sasagefind();
      }
    });

    function confirm(e){
      if(getCookie('sasageconfirmdate') != ''){
        Toastify({
          text: getCookie('sasageconfirmdate')+' 이후에 다시 요청가능합니다.',
          position: "center",
          gravity: "bottom",
          duration: 3000,
          close: false
        }).showToast();
        return
      }

      bodydata = new FormData();
      bodydata.append('idx', e.getAttribute('idx'));
      fetchurl = url + '/sasageconfirm';
      fetch(fetchurl, {
          method: 'post',
          body: bodydata
      })
      .then((response) => response.json())
      .then((data) => {
        if(data=='success'){
          alert('서버 데이터에서 삭제되었습니다.')
          location.reload();
        }else if(data=='fail'){
          Toastify({
            text: '게시물이 현재 존재합니다.',
            position: "center",
            gravity: "bottom",
            duration: 3000,
            close: false
          }).showToast();
        }
      })

      nextdate = new Date();
      setCookie('sasageconfirmdate',`${nextdate.getDate()+1}일 ${nextdate.getHours()}시 ${nextdate.getMinutes()}분`, 1)
    }

    const regex = /[ㄱ-ㅎ|ㅏ-ㅣ ]/g;
    function sasagefind(){
      charnamevalue = document.querySelector("#charname").value;
      if(lastcharname == charnamevalue){
        return
      }
      lastcharname = charnamevalue;

      target = document.querySelector('#sasagewritelist');
      while (target.hasChildNodes()) {
          target.removeChild(target.firstChild);
      }

      // 올바르지 않은 문자열
      if(charnamevalue.length <= 1 || charnamevalue.match(regex)){
        Toastify({
          text: '검색어가 최소 두자 이하이거나, 올바르지 않은 문자열입니다.',
          position: "center",
          gravity: "bottom",
          duration: 3000,
          close: false
        }).showToast();
        return;
      }

      document.querySelector("#findlistzone").style.display = 'none';
      document.querySelector("#loading").style.display = '';

      bodydata = new FormData();
      bodydata.append('charname', charnamevalue.toLowerCase());
      fetchurl = url + '/sasagefind';
      fetch(fetchurl, {
          method: 'post',
          body: bodydata
      })
      .then((response) => response.json())
      .then((data) => {
        target = document.querySelector('#sasagewritelist');
        while (target.hasChildNodes()) {
            target.removeChild(target.firstChild);
        }

        document.querySelector("#findlistzone").style.display = '';
        document.querySelector("#loading").style.display = 'none';

        if(data.length === 0){
          tr = document.createElement('tr');
          emptytd = document.createElement('td');

          emptytd.textContent = `[${charnamevalue}]에 대한 검색결과가 없습니다.`;
          emptytd.setAttribute('colspan','3');

          tr.append(emptytd);
          document.querySelector("#sasagewritelist").appendChild(tr);
          return;
        }

        for (var i = 0; i < data.length; i++) {
          tr = document.createElement('tr');
          tdconfirm = document.createElement('td');
          tddate = document.createElement('td');
          tdtitle = document.createElement('td');

          idx = data[i]['idx'];
          date = data[i]['date'];
          db_year = date.slice(0,4);
          db_mon = date.slice(4,6);
          db_day = date.slice(6,8);
          db_hour = date.slice(8,10);
          db_min = date.slice(10,12);
          date = db_year + "-" + db_mon + "-" + db_day + " " + db_hour + ":" + db_min;

          tdconfirm.textContent = '재확인'
          tddate.textContent = date;
          tdtitle.textContent = data[i]['title'];
          
          tdconfirm.style.backgroundColor = '#4d4d4d'
          tdconfirm.setAttribute('onClick','confirm(this)');
          tdconfirm.setAttribute('idx',idx);
          tddate.setAttribute("onClick",`window.open("https://www.inven.co.kr/board/lostark/5355/${idx}")`);
          tdtitle.setAttribute("onClick",`window.open("https://www.inven.co.kr/board/lostark/5355/${idx}")`);

          tr.append(tddate);
          tr.append(tdtitle);
          tr.append(tdconfirm);
          tr.style.cursor = 'pointer';
          document.querySelector("#sasagewritelist").appendChild(tr);
        }
      })
    }
  </script>
  
  <!-- toastify -->
  <script async src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

  <!-- google ADSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4936470262963011"
    crossorigin="anonymous"></script>
    
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script src="https://www.googletagmanager.com/gtag/js?id=G-XD44D79GLY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-XD44D79GLY');
  </script>

  <!-- Mircrosoft Clarity -->
  <script async type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "bohv5f4wfu");
  </script>

  <link rel="stylesheet" href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" type="text/css">
</body>
</html>