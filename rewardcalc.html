<!DOCTYPE html>
<html>
<head class="h-100">
  <title>더보기 계산기 :: LoChart</title>
  <script>var here = "rewardcalc";</script>

  <!-- jquery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="js/jquery.cookie-1.4.1.min.js" > </script>

  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <!-- custom -->
  <script src="js/custom.js"></script>
  <link rel="stylesheet" type="text/css" href="css/custom.css">


  <!-- google ADSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4936470262963011"
     crossorigin="anonymous"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XD44D79GLY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-XD44D79GLY');
  </script>

  <!-- temp ADfit -->
  <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script> 

  <style>
    @media (max-width: 992px) {
      .w-50 {
        width: 100%!important;
      }
    }
    .accordion-button {
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;
      padding: 1rem 1.25rem;
      font-size: 1rem;
      color: #ffffff;
      text-align: left;
      background-color: #000;
      border: 0;
      border-radius: 0;
      overflow-anchor: none;
      transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out,border-radius .15s ease;
    }
    .accordion-button:not(.collapsed) {
      color: #ffffff;
      background-color: #606060;
      box-shadow: inset 0 -1px 0 rgba(0,0,0,.125);
    }
    .accordion-button::after {
      flex-shrink: 0;
      width: 1.25rem;
      height: 1.25rem;
      margin-left: auto;
      content: "";
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-size: 1.25rem;
      transition: transform .2s ease-in-out;
    }
    .accordion-button:not(.collapsed)::after {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
      transform: rotate(-180deg);
    }
  </style>
  <link href="css/cover.css" rel="stylesheet">
</head>

<body class="d-flex h-100 text-center text-white bg-dark">    
  <div class="container d-flex w-100 h-100 p-3 mx-auto flex-column">

    <header class="mb-3">
      <div>
        <a href="/"><h3 class="float-md-start mb-0 text-white">LoChart</h3></a>
        <nav class="nav nav-masthead justify-content-center float-md-end"></nav>
      </div>
    </header>

    <main class="pt-5 pb-5 px-3">
      <div class="text-center">

      <!-- temp ad -->
      <div class="ad mb-5">
        <div>
          <div class="text-center">
            <ins class="kakao_ad_area" style="display:none;" 
            data-ad-unit    = "DAN-XJwlOkv1K5GXhAIz" 
            data-ad-width   = "728" 
            data-ad-height  = "90"></ins>
          </div>
        </div>
        <div id="ads-left">
          <div>
            <ins class="kakao_ad_area" style="display:none;" 
            data-ad-unit    = "DAN-nsfEeS2PlFxohWoX" 
            data-ad-width   = "160" 
            data-ad-height  = "600"></ins> 
          </div>
        </div>
        <div id="ads-right">
          <div>
            <ins class="kakao_ad_area" style="display:none;" 
            data-ad-unit    = "DAN-XoJlI1MzVRSxM5dr" 
            data-ad-width   = "160" 
            data-ad-height  = "600"></ins> 
          </div>
        </div>
      </div>
      
      <div class="mx-auto w-100 pt-5 pb-5">
        <div class="clearfix">
          <h6 class="float-start"><span>더보기 보상 기준 : 2022-03-16 패치이후</span></h6>
          <h6 class="float-end"><span>아이템 값 기준 : </span><span id="date"></span></h6>
        </div>
        <div class="accordion" id="bossaccordion">

        </div>
      </div>
    </main>

    <!-- tempAd -->
    <footer class="mt-5 text-white-50">
      <div class="p-0 m-0 mb-2 text-center">
        <ins class="kakao_ad_area" style="display:none;" 
        data-ad-unit    = "DAN-wTnO0MIIPOzE9w0o" 
        data-ad-width   = "728" 
        data-ad-height  = "90"></ins> 
      </div>
      
      <!-- AdSense -->
      <div class="ADsense">
        <!-- loa_market_chart -->
        <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-4936470262963011"
        data-ad-slot="8129420230"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
      <p>Cover template for <a href="https://getbootstrap.com/" class="text-white">Bootstrap</a>, by <a href="https://twitter.com/mdo" class="text-white">@mdo</a>.</p>
    </footer>
  </div>
  
  
  <script>
    $(function(){
      var reward_bonus_array = [
                                  {
                                    "bossname":"아르고스",
                                    "bossitem":"",
                                    "phase":3,
                                    "phaserewardgold":[700,400,500], 
                                    "phasebonusrewardgold":[0,0,500], 
                                    "phaserewarditem":[0,0,0], 
                                    "phasebonusrewarditem":[
                                                              [],
                                                              [],
                                                              [
                                                                ["수호석 결정",240],
                                                                ["파괴석 결정",120],
                                                                ["명예의 파편",720],
                                                                ["위대한 명예의 돌파석",5]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"발탄(노말)",
                                    "bossitem":"마수의 뼈",
                                    "phase":2,
                                    "phaserewardgold":[500,2000],
                                    "phasebonusrewardgold":[500,800],
                                    "phaserewarditem":[1,2],
                                    "phasebonusrewarditem":[
                                                              [
                                                                ["수호석 결정",480],
                                                                ["파괴석 결정",240],
                                                                ["명예의 파편",400],
                                                                ["위대한 명예의 돌파석",6],
                                                                ["마수의 뼈",1]
                                                              ],
                                                              [
                                                                ["수호석 결정",600],
                                                                ["파괴석 결정",300],
                                                                ["명예의 파편",700],
                                                                ["위대한 명예의 돌파석",7],
                                                                ["마수의 뼈",1]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"발탄(하드)",
                                    "bossitem":"마수의 뼈",
                                    "phase":2,
                                    "phaserewardgold":[1000,3500],
                                    "phasebonusrewardgold":[900,1200],
                                    "phaserewarditem":[3,3],
                                    "phasebonusrewarditem":[
                                                              [
                                                                ["수호석 결정",720],
                                                                ["파괴석 결정",360],
                                                                ["명예의 파편",1000],
                                                                ["위대한 명예의 돌파석",10],
                                                                ["마수의 뼈",3]
                                                              ],
                                                              [
                                                                ["수호석 결정",960],
                                                                ["파괴석 결정",480],
                                                                ["명예의 파편",1300],
                                                                ["위대한 명예의 돌파석",10],
                                                                ["마수의 뼈",3]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"비아키스(노말)",
                                    "bossitem":"욕망의 날개",
                                    "phase":3,
                                    "phaserewardgold":[500,600,1400],
                                    "phasebonusrewardgold":[400,600,800],
                                    "phaserewarditem":[1,1,1],
                                    "phasebonusrewarditem":[
                                                              [
                                                                ["수호석 결정",300],
                                                                ["파괴석 결정",150],
                                                                ["명예의 파편",480],
                                                                ["위대한 명예의 돌파석",6],
                                                                ["욕망의 날개",1]
                                                              ],
                                                              [
                                                                ["수호석 결정",480],
                                                                ["파괴석 결정",240],
                                                                ["명예의 파편",600],
                                                                ["위대한 명예의 돌파석",6],
                                                                ["욕망의 날개",1]
                                                              ],
                                                              [
                                                                ["수호석 결정",600],
                                                                ["파괴석 결정",300],
                                                                ["명예의 파편",900],
                                                                ["위대한 명예의 돌파석",7],
                                                                ["욕망의 날개",1]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"비아키스(하드)",
                                    "bossitem":"욕망의 날개",
                                    "phase":3,
                                    "phaserewardgold":[1000,1000,2500],
                                    "phasebonusrewardgold":[700,900,1200],
                                    "phaserewarditem":[2,2,2],
                                    "phasebonusrewarditem":[
                                                              [
                                                                ["수호석 결정",480],
                                                                ["파괴석 결정",240],
                                                                ["명예의 파편",1200],
                                                                ["위대한 명예의 돌파석",10],
                                                                ["욕망의 날개",2]
                                                              ],
                                                              [
                                                                ["수호석 결정",720],
                                                                ["파괴석 결정",360],
                                                                ["명예의 파편",1200],
                                                                ["위대한 명예의 돌파석",10],
                                                                ["욕망의 날개",2]
                                                              ],
                                                              [
                                                                ["수호석 결정",960],
                                                                ["파괴석 결정",480],
                                                                ["명예의 파편",1500],
                                                                ["위대한 명예의 돌파석",10],
                                                                ["욕망의 날개",2]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"쿠크세이튼(노말)",
                                    "bossitem":"광기의 나팔",
                                    "phase":3,
                                    "phaserewardgold":[1000,1000,2500],
                                    "phasebonusrewardgold":[800,1000,1300],
                                    "phaserewarditem":[1,2,2],
                                    "phasebonusrewarditem":[
                                                              [
                                                                ["수호석 결정",600],
                                                                ["파괴석 결정",300],
                                                                ["명예의 파편",1300],
                                                                ["위대한 명예의 돌파석",12],
                                                                ["광기의 나팔",1]
                                                              ],
                                                              [
                                                                ["수호석 결정",840],
                                                                ["파괴석 결정",420],
                                                                ["명예의 파편",1300],
                                                                ["위대한 명예의 돌파석",12],
                                                                ["광기의 나팔",2]
                                                              ],
                                                              [
                                                                ["수호석 결정",1080],
                                                                ["파괴석 결정",540],
                                                                ["명예의 파편",1600],
                                                                ["위대한 명예의 돌파석",12],
                                                                ["광기의 나팔",2]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"아브렐슈드(노말)",
                                    "bossitem":"몽환의 뿔",
                                    "phase":6,
                                    "phaserewardgold":[2000,2500,700,800,1000,1500],
                                    "phasebonusrewardgold":[400,600,700,800,900,1100],
                                    "phaserewarditem":[3,4,3,4,3,5],
                                    "phasebonusrewarditem":[
                                                              [
                                                                ["수호강석",160],
                                                                ["파괴강석",80],
                                                                ["명예의 파편",1400],
                                                                ["경이로운 명예의 돌파석",4],
                                                                ["몽환의 뿔",3]
                                                              ],
                                                              [
                                                                ["수호강석",200],
                                                                ["파괴강석",100],
                                                                ["명예의 파편",1600],
                                                                ["경이로운 명예의 돌파석",6],
                                                                ["몽환의 뿔",4]
                                                              ],
                                                              [
                                                                ["수호강석",200],
                                                                ["파괴강석",100],
                                                                ["명예의 파편",1400],
                                                                ["경이로운 명예의 돌파석",4],
                                                                ["몽환의 뿔",3]
                                                              ],
                                                              [
                                                                ["수호강석",280],
                                                                ["파괴강석",140],
                                                                ["명예의 파편",1600],
                                                                ["경이로운 명예의 돌파석",6],
                                                                ["몽환의 뿔",4]
                                                              ],
                                                              [
                                                                ["수호강석",360],
                                                                ["파괴강석",180],
                                                                ["명예의 파편",1700],
                                                                ["경이로운 명예의 돌파석",6],
                                                                ["몽환의 뿔",3]
                                                              ],
                                                              [
                                                                ["수호강석",480],
                                                                ["파괴강석",240],
                                                                ["명예의 파편",2400],
                                                                ["경이로운 명예의 돌파석",8],
                                                                ["몽환의 뿔",5]
                                                              ]
                                                            ]
                                  },
                                  {
                                    "bossname":"아브렐슈드(하드)",
                                    "bossitem":"몽환의 사념",
                                    "phase":6,
                                    "phaserewardgold":[2500,3000,900,1100,1200,1800],
                                    "phasebonusrewardgold":[700,800,900,1100,1100,1400],
                                    "phaserewarditem":[3,4,3,4,3,5],
                                    "phasebonusrewarditem":[
                                                            [
                                                              ["수호강석",240],
                                                              ["파괴강석",120],
                                                              ["명예의 파편",1600],
                                                              ["경이로운 명예의 돌파석",8],
                                                              ["몽환의 사념",3]
                                                            ],
                                                            [
                                                              ["수호강석",360],
                                                              ["파괴강석",180],
                                                              ["명예의 파편",2000],
                                                              ["경이로운 명예의 돌파석",8],
                                                              ["몽환의 사념",4]
                                                            ],
                                                            [
                                                              ["수호강석",360],
                                                              ["파괴강석",180],
                                                              ["명예의 파편",1600],
                                                              ["경이로운 명예의 돌파석",8],
                                                              ["몽환의 사념",3]
                                                            ],
                                                            [
                                                              ["수호강석",480],
                                                              ["파괴강석",240],
                                                              ["명예의 파편",2000],
                                                              ["경이로운 명예의 돌파석",8],
                                                              ["몽환의 사념",4]
                                                            ],
                                                            [
                                                              ["수호강석",600],
                                                              ["파괴강석",300],
                                                              ["명예의 파편",2400],
                                                              ["경이로운 명예의 돌파석",10],
                                                              ["몽환의 사념",3]
                                                            ],
                                                            [
                                                              ["수호강석",900],
                                                              ["파괴강석",450],
                                                              ["명예의 파편",3000],
                                                              ["경이로운 명예의 돌파석",15],
                                                              ["몽환의 사념",5]
                                                            ]
                                                          ]
                                  }
                                ];
      
      var content = "";



      $.ajax({
        type: 'GET',
        dataType: 'jsonp',
        url: url + 'rewardcalc',
        success: function(json) {
          marketdata = json[0];
          marketdata['명예의 파편'] = marketdata['명예의 파편 주머니(대)']/1500;

          datatime = marketdata['date'];
          db_year = datatime.slice(0,4);
          db_mon = datatime.slice(4,6);
          db_day = datatime.slice(6,8);
          db_hour = datatime.slice(8,10);
          db_min = datatime.slice(10,12);
          $('#date').text(db_year + "-" + db_mon + "-" + db_day + " " + db_hour + ":" + db_min);



          var iteminfo = {"수호석 결정":10,
                          "파괴석 결정":10,
                          "명예의 파편":1,
                          "위대한 명예의 돌파석":1,
                          "수호강석":10,
                          "파괴강석":10,
                          "경이로운 명예의 돌파석":1
                          };
          var totalbonusrewardgold = 0;
          reward_bonus_array.forEach(function(boss, index){
            content = 
`
<div class="accordion-item">
  <h2 class="accordion-header" id="heading${index}">
    <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${index}" aria-expanded="false" aria-controls="collapse${index}">
      ${boss['bossname']}
    </button>
  </h2>
  <div id="collapse${index}" class="accordion-collapse collapse" aria-labelledby="heading${index}" data-bs-parent="#bossaccordion">
    <div class="accordion-body p-0">
      <table class="table table-dark table-hover mb-0">
        <thead>
          <tr>
            <th scope="col">관문</th>
            <th scope="col">획득 골드</th>
            <th scope="col">더보기 비용</th>
            <th scope="col">기본 보상</th>
            <th scope="col">더보기 보상</th>
            <th scope="col">/</th>
            <th scope="col">이익</th>
          </tr>
        </thead>
`;
            for (var i = 0; i < boss['phase']; i++) {
              content += 
`
        <tbody class="align-middle">
          <tr>
            <th scope="row">${i+1}관문</th>
            <td>
              <span id="cleargold">${boss['phaserewardgold'][i]}</span><span><img src="img/gold.png" class="ms-1 img-gold"></span>
            </td>
            <td>
              <span id="bonusgold">${boss['phasebonusrewardgold'][i]}</span><span><img src="img/gold.png" class="ms-1 img-gold"></span>
            </td>
`;
              if(boss['bossitem'] != ""){
                content +=
`
            <td><span>${boss['bossitem']} </span>${boss['phaserewarditem'][i]}<span>개</span></td>
`;
              }else{
                content +=
`
            <td></td>
`;
              }
              content += 
`
            <td>
`;
              for (var j = 0; j < boss['phasebonusrewarditem'][i].length; j++) {
                content += `<p><span id="rewarditemname">${boss['phasebonusrewarditem'][i][j][0]}</span> × <span id="rewarditemqty">${boss['phasebonusrewarditem'][i][j][1]}</span></p>`;
              }
              content += 
`
            </td>
            <td>
`;
              totalbonusrewardgold = 0;
              for (var j = 0; j < boss['phasebonusrewarditem'][i].length; j++) {
                if(boss['bossitem'] == boss['phasebonusrewarditem'][i][j][0]){
                  content += `<p>　</p>`;
                  continue;
                }

                tempA = marketdata[boss['phasebonusrewarditem'][i][j][0]];
                tempB = boss['phasebonusrewarditem'][i][j][1] / iteminfo[boss['phasebonusrewarditem'][i][j][0]];
                tempcalc = tempA * tempB;

                tempAtoShow = tempA;
                if(boss['phasebonusrewarditem'][i][j][0].indexOf("의 파편") != -1){
                  tempAtoShow = tempA.toFixed(3);
                }

                content += `<p><span id="rewarditemname">${tempAtoShow}</span> × <span id="rewarditemqty">${tempB}</span> = <span>${parseInt(tempcalc)}</span></p>`;
                totalbonusrewardgold += tempcalc;
              }
              content +=
`
            </td>
          <td class="fw-bold">
            <p><span>${parseInt(totalbonusrewardgold)}</span><span> - </span><span>${boss['phasebonusrewardgold'][i]}</span><span> = </span></span></p>
`;
              tempresult = parseInt(totalbonusrewardgold) - boss['phasebonusrewardgold'][i];
              temptextcolor = "#00ff00";
              if(tempresult <= 0){
                temptextcolor = "#ff6b6b";
              }
              content +=
`
            <p><span style="color:${temptextcolor}">${tempresult}</span><span><img src="img/gold.png" class="ms-1 img-gold"></span></p>
`;
              content +=
`
          </td>
          </tr>
        </tbody>
`;
            }
            
            content +=
`
      </table>
    </div>
  </div>
</div>
`;
            $('#bossaccordion').append(content);
          });
        }
      });
    });
  </script>
</body>
</html>